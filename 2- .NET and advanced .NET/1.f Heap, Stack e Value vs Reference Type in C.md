In C# gli oggetti possono essere **value type** (tipi valore) o **reference type** (tipi riferimento).  
La differenza principale riguarda **dove vengono memorizzati in memoria** e **come vengono copiati/gestiti**.

---

## 1. Stack

- Memoria **veloce** e gestita automaticamente.
- Utilizzato per **variabili locali e parametri dei metodi**.
- Tipi **value type** (es. `int`, `double`, `struct`) vengono memorizzati **direttamente nello stack**.
- Quando assegni una variabile a un’altra, viene **copiato il valore** (copia indipendente).

**Esempio**

```csharp

int a = 5;
int b = a; // Copia il valore 
b = 10; 
Console.WriteLine(a); // 5 -> a non cambia
```

---
## 2. Heap

- Memoria **più lenta**, gestita dal **Garbage Collector**.
- Usata per **oggetti reference type**, come **classi, stringhe, array**.
- Lo stack contiene **solo un puntatore** all’oggetto nell’heap.
- Quando assegni una variabile a un’altra, viene copiato il **riferimento**, non l’oggetto.

**Esempio**

```csharp
class Persona 
{     
public string Nome { get; set; } 
}  

Persona p1 = new Persona { Nome = "Luca" }; 
Persona p2 = p1; // Copia il riferimento 

p2.Nome = "Mario"; 

Console.WriteLine(p1.Nome); // Mario -> entrambi puntano allo stesso oggetto`
```
---

## 3. Value Type vs Reference Type

| Caratteristica                                     | Value Type (int, struct)                                     | Reference Type (class, array)          |
| -------------------------------------------------- | ------------------------------------------------------------ | -------------------------------------- |
| <span style="color: #8392a4">Memorizzazione</span> | Stack (o parte dello stack per struct all’interno di classi) | Heap (puntatore sullo stack)           |
| <span style="color: #8392a4">Copia</span>          | Copia del valore → indipendente                              | Copia del riferimento → stesso oggetto |
| <span style="color: #8392a4">Ereditarietà</span>   | Non supportata (struct)                                      | Supportata (class)                     |
| <span style="color: #8392a4">Esempi comuni</span>  | int, double, bool, struct, enum                              | class, string, array, delegate         |

---

## 4. Sintesi visiva
```diff 
`Stack: 
+-------+ 
| int a |  <- copia del valore 
| int b | 
+-------+  

Heap: +----------------+ 
      | Persona {Nome} | <- p1 e p2 puntano qui 
      +----------------+`
```

- **Stack** → veloce, valori piccoli, vita breve (scope del metodo).
- **Heap** → più lento, oggetti grandi/dinamici, vita gestita dal GC.
- **Value Type** → memorizza il valore reale.
- **Reference Type** → memorizza un riferimento all’oggetto nell’heap.
    

---

### Sintesi:

> In C#, <span style="color: #8392a4">struct e tipi primitivi</span> sono value type e risiedono nello **stack**, con copia indipendente.  
> Le **classi** e **altri oggetti** sono reference type, risiedono nell’ **heap**, e più variabili possono puntare allo stesso oggetto.  
> Questa differenza è fondamentale per capire **prestazioni, gestione della memoria e comportamento delle assegnazioni**.