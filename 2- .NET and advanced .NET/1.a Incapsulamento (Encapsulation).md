L’**incapsulamento** è uno dei 4 pilastri fondamentali della Programmazione Orientata agli Oggetti (OOP).  
Indica il principio per cui i **dati** (proprietà) e le **operazioni** (metodi) che li gestiscono sono **racchiusi insieme** all’interno di una classe, con **accesso controllato** dall’esterno.

---

## Obiettivi principali dell’incapsulamento

1. **Nascondere i dettagli interni** (information hiding).  
   - Non tutto ciò che avviene dentro una classe deve essere esposto.  
   - Si espone solo ciò che è necessario all’uso della classe. 

2. **Proteggere i dati** da utilizzi scorretti.  
   - Impedisce che variabili interne vengano modificate in modi non previsti.

3. **Definire un’interfaccia chiara**.  
   - Gli oggetti interagiscono solo con ciò che la classe decide di rendere disponibile.

---
### Come si implementa l’incapsulamento?

Attraverso **modificatori di accesso** (dipendono dal linguaggio, ma di solito ci sono):

- `private` → visibile solo dentro la classe.
- `protected` → visibile alla classe e alle sue sottoclassi.
- `public` → visibile a tutti.
    
- (alcuni linguaggi hanno anche `internal`, `package`, ecc.).

---
#### [[1.e Modificatori di accesso in Csharp]]

---

## Esempio Completo di incapsulamento
```csharp
public abstract class Persona
{
    protected string Nome { get; init; } // init-only property
    public abstract void Saluta();
}

public sealed class Studente : Persona
{
    private readonly int matricola;
    public override void Saluta()
    {
        Console.WriteLine($"Ciao, sono {Nome} - Matricola {matricola}");
    }
}

```

## Esempio pratico senza incapsulamento
```csharp
public class ContoBancario
{
    // Campo accessibile a chiunque (NON è sicuro!)
    public decimal Saldo;
}

class Program
{
    static void Main()
    {
        var conto = new ContoBancario();
        conto.Saldo = -1000; // ❌ Posso impostare un saldo negativo senza controllo
    }
}
```
## Esempio corretto con incapsulamento
```csharp
public class ContoBancario
{
    // Campo privato → nascosto all’esterno
    private decimal saldo;

    // Proprietà per leggere il saldo (ma non modificarlo direttamente)
    public decimal Saldo = > saldo;

    // Metodo pubblico per depositare denaro
    public void Deposita(decimal importo)
    {
        if (importo < = 0)
            throw new ArgumentException("L'importo deve essere positivo");
        saldo += importo;
    }

    // Metodo pubblico per prelevare denaro
    public void Preleva(decimal importo)
    {
        if (importo < = 0)
            throw new ArgumentException("L'importo deve essere positivo");
        if (importo > saldo)
            throw new InvalidOperationException("Fondi insufficienti");
        saldo - = importo;
    }
}

class Program
{
    static void Main()
    {
        var conto = new ContoBancario();
        conto.Deposita(500);
        conto.Preleva(200);

        Console.WriteLine($"Saldo attuale: {conto.Saldo}"); // ✅ 300
    }
}
```
## Vantaggi dell’incapsulamento

- **Sicurezza dei dati** → previene stati incoerenti o valori invalidi.
- **Modularità** → la logica interna può cambiare senza rompere il codice esterno.
- **Chiarezza** → l’oggetto espone solo i metodi/proprietà rilevanti per l’uso.
- **Manutenibilità** → più facile aggiornare e testare il codice.

### In sintesi:
>L’incapsulamento consiste nel **nascondere** i **dettagli implementativi** di una classe e nell’**esporre un’interfaccia pubblica sicura e controllata**.
>In questo modo si protegge l’integrità dei dati e si garantisce che l’oggetto venga usato solo nei modi previsti.